# 声明关键字

## 前言

es6开始之后，又出现了`let`，`const`两个关键字用于声明变量，三个关键字存在一些细微的区别，这里从区别性方面出发，总结一下。
> 注：某些示例代码因为`let`和`const`的表现一致，所以统一用`let`作为示例，有不同的时候会特意说一下`const`。

### 作用域区别
+ var 声明变量会挂载在全局对象(浏览器环境就是 `window` 对象)，函数作用域。
+ let，const 不会，块级作用域，就是一个大括号包裹的代码块。
+ 注意如果变量不加声明的关键字，默认就是挂载在全局对象上。

``` javascript
// 代码块1 声明挂载全局变量上
var bar = 'bar';
let foo = 'foo';

console.log(window.bar); // bar
console.log(window.foo); // undefined

// 代码块2 作用域
{
  let b = 2;
  var a = 1;
}
function fn() {
  var c = 3;
  d = 10;
}
fn();

console.log(a); // 1
console.log(d); // 10
console.log(window.d); // 10
console.log(c); // Uncaught ReferenceError: c is not defined // 函数作用域
console.log(b); // Uncaught ReferenceError: b is not defined // 块级作用域
```

### 重复声明
+ var可，会进行值的覆盖。
+ let，const不可。

``` javascript
var a = 1;
var a = 2;

console.log(a); // 2

let b = 1;
let b = 2; // Uncaught SyntaxError: Identifier 'b' has already been declared

```

### 声明前可否使用(变量提升，暂时性死区)
+ var可，存在变量提升。
+ let，const不可，存在暂时性死区，声明前的区域不能使用该变量大概就是暂时性死区的意思。


``` javascript
console.log(a); // undefined
var a = 1;
// 等价于
// var a;
// console.log(a);
// a = 1;

console.log(b); // Uncaught ReferenceError: b is not defined
let b = 1;
```

> 注意：变量提升还有一个需要注意的点，不止普通变量，函数`function`也存在变量提升，且优先级比普通变量高，即提升到更前面。看个例子：

``` javascript
console.log(a); // f a() {}
var a = 1;
function a() {};
console.log(a); // 1

// 等价于
// var a;
// function a() {}
// console.log(a);
// a = 1;
// console.log(a);

```

### 声明前是否必须赋值

+ var，let不需要。
+ const在声明时就需要显性指定赋值，否则报错`Uncaught SyntaxError: Missing initializer in const declaration`。

``` javascript
var a;
let b;
const c; // Uncaught SyntaxError: Missing initializer in const declaration
```

### 常量

const声明的变量为常量，变量为基础类型则值不可变，引用类型时则引用的指针值不可变。

``` javascript
const a = 1;
const obj = {a: 1};

obj.a = 2; // 不报错，因为引用不变
a = 2; // Uncaught TypeError: Assignment to constant variable
```

